<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Precio de Fotos</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .calculator {
    width: 300px; /* Adjust the width to your desired size */
    padding: 10px;
    border-radius: 5px;
    background-color: #ffc800;
    box-sizing: border-box;
    text-align: center;
    margin: auto;
  }
  .title {
    text-align: center;
    font-size: 25px;
  }
  .size {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 14px;
  }
  .quantity-container {
    justify-content: right;
    align-items: center;
    text-align: right;
  }
  .quantity-button {
    width: 30px;
    height: 30px;
    background-color: white;
    color: black;
    border: 3px solid #ccc;
    border-color: black;
    border-radius: 4px;
    cursor: pointer;
  }
  .quantity-input {
    width: 25px;
    padding: 5px;
    margin: 0 2px;
    text-align: center;
    border: 3px solid #ccc;
    border-color: black;
    border-radius: 4px;
  }
  button:hover {
    background-color: white;
  }
  .total-price-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 5px;
    font-size: 15px;
  }
  .total-price-label {
    font-size: 25px; /* Adjusted font size */
    margin-right: 10px;
  }
  .total-price-value {
    font-size: 25px; /* Adjusted font size */
    text-align: right;
  }
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: fixed;
    left: 0;
}
  .button-container {
    display: flex;	  
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    font-size: 15px;
  }
  .button-container button {
    padding: 4px 8px;
    border: none;
    background-color: white;
    color: black;    
    border: 3px solid #ccc;
    border-color: black;
    border-radius: 4px;
    cursor: pointer;
  }
  hr {
    border: 1px solid;
    margin: 2px 0;
  }
</style>
</head>
<body>

<div class="calculator">
  <h2 class="title">Marc Chagall Fotos - Calculadora de Precios</h2>
  <div class="button-container">
    <label>Precio Contado Efectivo/Debito/Transferencia</label>
    <button onclick="resetInputs()">Reset</button>
  </div>
  <hr>
  <div id="sizes">
    <!-- Sizes and quantities -->
    <!-- Generated dynamically -->
  </div>
  <hr>
  <div class="total-price-container">
    <label for="totalPrice" class="total-price-label">Total:</label>
    <span id="totalPrice" class="total-price-value">$0</span>
    <span id="interestLabel" style="display:none;"></span></span>&nbsp;<span>|</span>
    <input type="checkbox" id="applyInterest" onchange="calculateTotal()">
    <label for="applyInterest">Plan Simple 3</label>
  </div>

  <script>
  var sizes = [
    { size: "4x4 (40 min)", price: 1200 },
    { size: "4x4 (10 min)", price: 1500 },
    { size: "Visa/Pasaporte", price: 4900 },
    { size: "9cm x 13cm", price: 400 },
    { size: "10cm x 15cm", price: 450 },
    { size: "13cm x 18cm", price: 550 },
    { size: "15cm x 21cm", price: 600 },
    { size: "20cm x 30cm", price: 1900 },
    { size: "30cm x 40cm", price: 3000 },
    { size: "Digitalizado", price: 600 },
    { size: "Hora de Arte", price: 3000 },
    { size: "Revelado", price: 10000 }
  ];

  var sizesContainer = document.getElementById('sizes');
  sizes.forEach(function(size, index) {
    var sizeElement = document.createElement('div');
    sizeElement.classList.add('size');
    sizeElement.innerHTML = `
      <label for="size${index + 1}">${size.size} - $${formatPrice(size.price)}</label>
	  <div class="quantity-container">
        <button class="quantity-button decrement" onclick="decrementQuantity(${index + 1})">-</button>
        <input type="text" id="quantity${index + 1}" class="quantity-input" value="0" onkeypress="handleKeyPress(event, ${index + 1})" onfocus="if(this.value === '0') this.value = ''" onblur="if(this.value === '') this.value = '0'">
        <button class="quantity-button increment" onclick="incrementQuantity(${index + 1})">+</button>
      </div>
      
    `;
    sizesContainer.appendChild(sizeElement);
    // Add HR line after each size element
    if (index < sizes.length - 1) {
      sizesContainer.appendChild(document.createElement('hr'));
    }
  });

  var defaultPrices = sizes.map(function(size) {
    return size.price;
  });
  var customPrices = defaultPrices.slice();

  var interestCheckbox = document.getElementById("applyInterest");
  interestCheckbox.addEventListener("change", function() {
    calculateTotal();
    updateTotalPriceWithInterest();
  });

  function incrementQuantity(index) {
    var input = document.getElementById("quantity" + index);
    var value = parseInt(input.value || 0);
    input.value = value + 1;
    calculateTotal();
    calculateTotalPerSize(index);
  }

  function decrementQuantity(index) {
    var input = document.getElementById("quantity" + index);
    var value = parseInt(input.value || 0);
    if (value > 0) {
      input.value = value - 1;
      calculateTotal();
      calculateTotalPerSize(index);
    }
  }

  function handleKeyPress(event, index) {
    if (event.keyCode === 13) {
      var input = document.getElementById("quantity" + index);
      var value = parseInt(input.value || 0);
      if (value < 0) {
        input.value = 0;
      }
      calculateTotal();
      calculateTotalPerSize(index);
    }
  }

  function calculateTotal() {
    var total = 0;
    for (var i = 0; i < sizes.length; i++) {
      var quantity = parseInt(document.getElementById("quantity" + (i + 1)).value || 0);
      var price = interestCheckbox.checked ? customPrices[i] * 1.25 : customPrices[i];
      total += quantity * price;
    }
    document.getElementById("totalPrice").textContent = "$" + formatPrice(total);
    var interestLabel = document.getElementById("interestLabel");
    interestLabel.style.display = interestCheckbox.checked ? "inline" : "none";
  }

  function calculateTotalPerSize(index) {
    var quantity = parseInt(document.getElementById("quantity" + index).value || 0);
    var price = interestCheckbox.checked ? customPrices[index - 1] * 1.25 : customPrices[index - 1];
    var totalPerSize = quantity * price;
    document.getElementById("totalPerSize" + index).textContent = "$" + formatPrice(totalPerSize);
  }

  function updatePrices() {
    for (var i = 0; i < sizes.length; i++) {
      var newPrice = parseInt(document.getElementById("priceInput" + (i + 1)).value.replace(/\./g, '') || 0);
      customPrices[i] = newPrice;
      // Update price labels
      document.querySelector(`[for="size${i + 1}"]`).textContent = `${sizes[i].size} - $${formatPrice(newPrice)}`;
    }
    calculateTotal();
  }

  function updateTotalPriceWithInterest() {
    calculateTotal();
  }

  function resetInputs() {
  var inputs = document.querySelectorAll('.quantity-input');
  inputs.forEach(function(input) {
    input.value = 0;
  });

  // Reset total per size elements
  var totalPerSizeElements = document.querySelectorAll('.total-per-size');
  totalPerSizeElements.forEach(function(element) {
    element.textContent = "$0";
  });

  // Reset checkbox
  var interestCheckbox = document.getElementById("applyInterest");
  interestCheckbox.checked = false;

  calculateTotal();
}

  // Format price with dot as thousands separator
  function formatPrice(price) {
    return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
  }
</script>

</body>
</html>
